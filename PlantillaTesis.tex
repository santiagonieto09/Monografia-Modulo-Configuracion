\documentclass[12pt,spanish,fleqn,openany,letterpaper,pagesize]{scrbook}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}%escribir con acentos sin necesidad de comandos \'{} .
\usepackage[margin=2.5cm]{geometry} % Márgenes de 2.5cm en todos los lados

% Configuración para mejorar la justificación y evitar cortes de palabras
\usepackage{microtype} % Mejora la tipografía y justificación
\tolerance=1000 % Permite mayor flexibilidad en el espaciado
\emergencystretch=3em % Espacio adicional para evitar overfull
\hyphenpenalty=5000 % Penaliza mucho el corte de palabras
\widowpenalty=10000 % Evita líneas viudas
\clubpenalty=10000 % Evita líneas huérfanas

\usepackage{fancyhdr}
\usepackage{epsfig}
\usepackage{epic}
\usepackage{eepic}
\usepackage{amsmath}
\usepackage{threeparttable}
\usepackage{amscd}
\usepackage{here}
\usepackage{graphicx}

% Configuración para que figuras y tablas se queden en su posición
\usepackage{float} % Proporciona la opción [H] para posicionamiento fijo
\floatplacement{figure}{H} % Por defecto, las figuras se quedan donde están
\floatplacement{table}{H} % Por defecto, las tablas se quedan donde están

\usepackage{lscape}
\usepackage{tabularx}
\usepackage{subcaption}
% Forzar tamaño de letra en captions a normalsize (12pt en este documento)
\usepackage{caption}
\captionsetup{font=normalsize}
% Paquete para personalizar el título del índice (ToC)
\usepackage{tocloft}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{calligra} 
\usepackage[T1]{fontenc}
\usepackage{helvet} % Fuente Helvetica (muy similar a Arial)
\renewcommand{\familydefault}{\sfdefault} % Usa sans-serif (Helvetica) como fuente principal
\usepackage{listings} % Para mostrar codigo fuente en C, R, java
%\usepackage{natbib} %para las referencias plain
\usepackage[backend=bibtex,style=numeric]{biblatex}

\addbibresource{Bibliografia.bib}
\usepackage{rotating} %Para rotar texto, objetos y tablas seite. No se ve en DVI solo en PS. Seite 328 Hundebuch
                        %se usa junto con \rotate, \sidewidestable ....

% CONFIGURACIÃ"N DE HYPERREF (debe ir casi al final del preÃ¡mbulo)
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    filecolor=black,
    urlcolor=black,
    pdftitle={Tu tÃ­tulo aquÃ­},
    pdfauthor={Tu nombre aquÃ­},
}

% Configuración de nombres para \autoref (debe ir después de hyperref)
\addto\extrasspanish{%
  \def\chapterautorefname{Capítulo}%
  \def\sectionautorefname{Capítulo}%
  \def\subsectionautorefname{Subsección}%
  \def\figureautorefname{Figura}%
  \def\tableautorefname{Tabla}%
  \def\appendixautorefname{Anexo}%
}

% REDEFINICIONES DE NUMERACIÃ"N (despuÃ©s de hyperref)
\renewcommand{\theequation}{\thechapter-\arabic{equation}}
\renewcommand{\thefigure}{\thechapter-\arabic{figure}}
\renewcommand{\thetable}{\thechapter-\arabic{table}}

% CONFIGURACIÃ"N DE PÃGINA
\pagestyle{fancyplain}%\addtolength{\headwidth}{\marginparwidth}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter\; #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\; #1}}
\lhead[\fancyplain{}{}]{\fancyplain{}{}}
\rhead[\fancyplain{}{}]{\fancyplain{}{}}
\fancyfoot[C]{\thepage} % Número de página centrado en el pie
\thispagestyle{fancy}%
\addtolength{\headwidth}{0cm}
\unitlength1mm %Define la unidad LE para Figuras
\mathindent0cm %Define la distancia de las formulas al texto,  fleqn las descentra
\marginparwidth0cm
\parindent0cm %Define la distancia de la primera linea de un parrafo a la margen
\parskip 0.6em %Espacio entre pÃ¡rrafos

% Evitar que LaTeX distribuya verticalmente el contenido en la página
\raggedbottom % Deja el espacio sobrante al final de la página

%Para tablas,  redefine el backschlash en tablas donde se define la posici\'{o}n del texto en las
%casillas (con \centering \raggedright o \raggedleft)
\newcommand{\PreserveBackslash}[1]{\let\temp=\\#1\let\\=\temp}
\let\PBS=\PreserveBackslash
%Espacio entre lineas
\renewcommand{\baselinestretch}{1.1}
%Neuer Befehl f\"{u}r die Tabelle Eigenschaften der Aktivkohlen
\newcommand{\arr}[1]{\raisebox{1.5ex}[0cm][0cm]{#1}}
%Neue Kommandos
\usepackage{Befehle}

% Configuración de nombres para KOMA-Script y babel
\addto\captionsspanish{%
  \renewcommand{\appendixname}{Anexo}%
}

% Variable para controlar numeraciÃ³n de capÃ­tulos
\newif\ifnumberchapters
\numberchaptersfalse  % Por defecto, NO numerar capÃ­tulos

% Comando que se usa en cada archivo de capÃ­tulo
\newcommand{\mychapter}[1]{%
    \ifnumberchapters%
        \chapter{\centering #1}%
    \else%
        \chapter*{\centering #1}%
        \addcontentsline{toc}{chapter}{#1}%
        \refstepcounter{chapter}%
        \phantomsection
    \fi%
}

%Inicio del documento. Tener en cuenta que hay archivos auxiliares
\begin{document}
\pagenumbering{roman}
\include{HojaTitulo/HojaTituloMSc}

% REDEFINICIONES DE NOMBRES (después de \begin{document})
\renewcommand{\tablename}{\textbf{Tabla}}
\renewcommand{\figurename}{\textbf{Figura}}
\renewcommand{\listtablename}{Lista de Tablas}
\renewcommand{\listfigurename}{Lista de Figuras}
\renewcommand{\contentsname}{Contenido}
% Centrar solo el título del índice
\renewcommand{\cfttoctitlefont}{\hfill\normalsize\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill}
% Centrar los títulos de "Lista de figuras" y "Lista de tablas"
\renewcommand{\cftloftitlefont}{\hfill\normalsize\bfseries}
\renewcommand{\cftafterloftitle}{\hfill}
\renewcommand{\cftlottitlefont}{\hfill\normalsize\bfseries}
\renewcommand{\cftafterlottitle}{\hfill}

% Ajustar fuentes de encabezados: capítulos 16pt, secciones 14pt, KOMA-Script
\setkomafont{chapter}{\fontsize{16}{19}\selectfont\bfseries}
\setkomafont{section}{\fontsize{14}{17}\selectfont\bfseries}
\setkomafont{subsection}{\fontsize{14}{17}\selectfont\bfseries}
\setkomafont{subsubsection}{\normalsize\bfseries}
\setkomafont{paragraph}{\normalsize\bfseries}
\setkomafont{subparagraph}{\normalsize\bfseries}

% Eliminar espacio adicional antes de los capítulos
\RedeclareSectionCommand[
  beforeskip=0pt,
  afterskip=1.5\baselineskip
]{chapter}

% Asegurar que el Código mostrado con listings también use 12pt
\lstset{basicstyle=\ttfamily\normalsize}
\renewcommand{\appendixname}{Anexo}
\addto\captionsspanish{\renewcommand{\appendixname}{Anexo}}

% TABLA DE CONTENIDOS Y LISTAS
\tableofcontents
\clearpage

\phantomsection
\addcontentsline{toc}{chapter}{Lista de figuras} % para que aparezca en el indice de contenidos
\listoffigures % indice de figuras
\clearpage

\phantomsection
\addcontentsline{toc}{chapter}{Lista de tablas} % para que aparezca en el indice de contenidos
\listoftables % indice de tablas
\clearpage

%\include{Tab_Simbolos/TabSimbolosMSc}
%\include{Resumen}%\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}\cleardoublepage}}

\pagenumbering{arabic}

% CapÃ­tulos sin numeraciÃ³n (usa \mychapter{} en los archivos)
\include{Cap1/Cap1}
\include{Cap2/Cap2}
\include{Cap3/Cap3}
\include{Cap4/Cap4}
\include{Cap5/Cap5}
\include{Cap6/Cap6}
\include{Cap7/Cap7}
\include{Cap8/Cap8}

\phantomsection
\addcontentsline{toc}{chapter}{\numberline{}Bibliografía}
\printbibliography

\include{Anexos/Anexos}
\end{document}
